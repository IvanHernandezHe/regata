import{p as w,q as L}from"./chunk-ZGOKTXAT.js";import{a as E}from"./chunk-CNYAGABG.js";import{d as x,e as M}from"./chunk-WKLMLA3H.js";import{b as O,c as A}from"./chunk-BVIVYH6A.js";import{a as I}from"./chunk-C5GIYBMA.js";import{f as y,h as P,k as S}from"./chunk-N2J27IAP.js";import{Bb as f,Da as n,Ib as v,Lb as b,Ma as C,Mb as _,Ob as k,Ra as u,W as s,cb as a,db as i,eb as d,fb as p,nb as m,ob as g,yb as c,za as h,zb as l}from"./chunk-KUB3M4GV.js";var T=o=>["/product",o];function F(o,e){if(o&1&&(i(0,"span",17),c(1),d()),o&2){let r=g();n(),l(r.product.category)}}function j(o,e){if(o&1&&(i(0,"span",18),c(1),d()),o&2){let r=g();a("ngClass",r.stockClass(r.product.stock||0)),n(),l(r.stockLabel(r.product.stock||0))}}var N=class o{product;#e=s(A);auth=s(I);#n=s(E);#t=s(O);#i=s(x);addToCart(){this.#e.add(this.product)}saveForLater(){if(!this.auth.isAuthenticated()){this.#t.info("Inicia sesi\xF3n para guardar en favoritos"),this.#i.navigate(["/auth"],{queryParams:{returnUrl:"/shop"}});return}this.#n.add(this.product.id),this.#t.success("Guardado en favoritos")}imgSrc(){let e=this.product?.images;return e&&e.length?e[0]:"/assets/pzero-1_80.jpg"}stockClass(e){return e<=5?"bg-danger":e<=20?"bg-warning text-dark":"bg-success"}stockLabel(e){return e<=5?`Quedan ${e}`:e<=20?`Stock bajo: ${e}`:`Stock: ${e}`}static \u0275fac=function(r){return new(r||o)};static \u0275cmp=C({type:o,selectors:[["app-product-card"]],inputs:{product:"product"},decls:24,vars:23,consts:[[1,"card","h-100","position-relative"],["class","badge rounded-pill text-bg-light position-absolute category-badge border",4,"ngIf"],[1,"media","d-block",3,"routerLink"],[3,"src","alt"],[1,"card-body","d-flex","flex-column","gap-1"],[1,"card-title","brand-model","mb-0"],[1,"text-decoration-none",3,"routerLink"],[1,"text-muted","small"],["class","badge mt-1 align-self-start",3,"ngClass",4,"ngIf"],[1,"mt-auto","d-flex","justify-content-between","align-items-center","pt-2"],[1,"price"],[1,"d-flex","align-items-center","gap-2"],["type","button","aria-label","Agregar a favoritos",1,"btn","btn-outline-secondary","btn-sm","d-inline-flex","align-items-center","gap-2",3,"click","title"],["name","heart","size","16","aria-hidden","true",3,"strokeWidth"],[1,"d-none","d-sm-inline"],["type","button",1,"btn","btn-warning","btn-sm","fw-semibold","d-inline-flex","align-items-center","gap-2",3,"click"],["name","shopping-cart","size","16","aria-hidden","true",3,"strokeWidth"],[1,"badge","rounded-pill","text-bg-light","position-absolute","category-badge","border"],[1,"badge","mt-1","align-self-start",3,"ngClass"]],template:function(r,t){r&1&&(i(0,"div",0),u(1,F,2,1,"span",1),i(2,"a",2),p(3,"img",3),d(),i(4,"div",4)(5,"h5",5)(6,"a",6),c(7),d()(),i(8,"div",7),c(9),d(),u(10,j,2,2,"span",8),i(11,"div",9)(12,"strong",10),c(13),_(14,"currency"),d(),i(15,"div",11)(16,"button",12),m("click",function(){return t.saveForLater()}),p(17,"lucide-icon",13),i(18,"span",14),c(19,"Guardar"),d()(),i(20,"button",15),m("click",function(){return t.addToCart()}),p(21,"lucide-icon",16),i(22,"span"),c(23,"Agregar"),d()()()()()()),r&2&&(n(),a("ngIf",t.product==null?null:t.product.category),n(),a("routerLink",b(19,T,t.product.id)),n(),a("alt",v("",t.product.brand," ",t.product.modelName))("src",t.imgSrc(),h),n(3),a("routerLink",b(21,T,t.product.id)),n(),f(" ",t.product.brand," ",t.product.modelName," "),n(2),f("",t.product.size," \xB7 SKU ",t.product.sku),n(),a("ngIf",(t.product==null?null:t.product.stock)!==void 0),n(3),l(k(14,16,t.product.price,"MXN")),n(3),a("title",t.auth.isAuthenticated()?"Agregar a favoritos":"Inicia sesi\xF3n para guardar"),n(),a("strokeWidth",2.5),n(4),a("strokeWidth",2.5))},dependencies:[M,P,y,L,w,S],styles:['.media[_ngcontent-%COMP%]{position:relative;overflow:hidden;background:#fff}.media[_ngcontent-%COMP%]:before{content:"";display:block;aspect-ratio:1 / 1}.media[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{position:absolute;inset:0;width:100%;height:100%;object-fit:contain;padding:1rem}.brand-model[_ngcontent-%COMP%]{display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden;min-height:2.6em}.price[_ngcontent-%COMP%]{font-size:1.1rem}.category-badge[_ngcontent-%COMP%]{position:absolute;top:.5rem;left:.5rem}[data-bs-theme="dark"][_nghost-%COMP%]   .media[_ngcontent-%COMP%], [data-bs-theme="dark"]   [_nghost-%COMP%]   .media[_ngcontent-%COMP%]{background:#0f0f0f}']})};export{N as a};
