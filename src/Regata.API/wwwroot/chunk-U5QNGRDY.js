import{a as F}from"./chunk-XVX2AJZZ.js";import{d as A,e as w}from"./chunk-O3H6VTXY.js";import{b as P,c as I,f as M,p as C}from"./chunk-S2MMUX5V.js";import"./chunk-CLVRU5UC.js";import{g as v,j as _,k as O}from"./chunk-FI2SLH6F.js";import{Da as r,Eb as b,Fb as x,Gb as S,Kb as y,Lb as c,Ma as u,Nb as g,Ra as f,W as p,cb as o,db as t,eb as e,fb as E,nb as h,yb as n,zb as m}from"./chunk-4XZ7JV2Z.js";var D=d=>["/admin/pedidos",d];function T(d,a){if(d&1&&(t(0,"tr")(1,"td",7),n(2),e(),t(3,"td"),n(4),e(),t(5,"td"),n(6),c(7,"date"),e(),t(8,"td"),n(9),c(10,"currency"),e(),t(11,"td")(12,"span",8),n(13),e()(),t(14,"td")(15,"span",9),n(16),e()(),t(17,"td",10)(18,"a",11),n(19,"Ver"),e()()()),d&2){let i=a.$implicit;r(2),m(i.id),r(2),m(i.userEmail||"N/A"),r(2),m(g(7,7,i.createdAtUtc,"short")),r(3),m(g(10,10,i.total,"MXN")),r(4),m(i.paymentStatus),r(3),m(i.status),r(2),o("routerLink",y(13,D,i.id))}}var N=class d{#e=p(F);#t=p(A);items=[];newEmail="";creating=!1;ngOnInit(){this.#e.list().subscribe({next:a=>this.items=a.items,error:()=>this.items=[]})}create(){let a=(this.newEmail||"").trim();a&&(this.creating=!0,this.#e.create({userEmail:a}).subscribe({next:i=>{this.creating=!1,this.newEmail="",this.#t.navigate(["/admin/pedidos",i.id])},error:i=>{this.creating=!1,alert(i?.error?.error||"No se pudo crear el pedido")}}))}static \u0275fac=function(i){return new(i||d)};static \u0275cmp=u({type:d,selectors:[["ng-component"]],decls:26,vars:3,consts:[[1,"container","my-4"],[1,"d-flex","align-items-center","gap-2","mb-3"],["placeholder","Email del cliente",1,"form-control",2,"max-width","320px",3,"ngModelChange","ngModel"],[1,"btn","btn-dark",3,"click","disabled"],[1,"table-responsive"],[1,"table","align-middle"],[4,"ngFor","ngForOf"],[1,"small"],[1,"badge","text-bg-secondary"],[1,"badge","text-bg-light"],[1,"text-end"],[1,"btn","btn-sm","btn-outline-dark",3,"routerLink"]],template:function(i,l){i&1&&(t(0,"section",0)(1,"h2"),n(2,"Pedidos (Admin)"),e(),t(3,"div",1)(4,"input",2),S("ngModelChange",function(s){return x(l.newEmail,s)||(l.newEmail=s),s}),e(),t(5,"button",3),h("click",function(){return l.create()}),n(6,"Nuevo"),e()(),t(7,"div",4)(8,"table",5)(9,"thead")(10,"tr")(11,"th"),n(12,"Folio"),e(),t(13,"th"),n(14,"Cliente"),e(),t(15,"th"),n(16,"Fecha"),e(),t(17,"th"),n(18,"Total"),e(),t(19,"th"),n(20,"Pago"),e(),t(21,"th"),n(22,"Estado"),e(),E(23,"th"),e()(),t(24,"tbody"),f(25,T,20,15,"tr",6),e()()()()),i&2&&(r(4),b("ngModel",l.newEmail),r(),o("disabled",l.creating||!l.newEmail),r(20),o("ngForOf",l.items))},dependencies:[v,w,C,P,I,M,_,O],encapsulation:2})};export{N as OrdersAdminPage};
