import{a as h}from"./chunk-VERFBTRB.js";import{r as p,u as l}from"./chunk-DW6AFCKZ.js";import{E as a,N as i,Q as u,V as s,m as o,y as n}from"./chunk-BIY3REYI.js";var c=class r{#t=s(p);#e=l.apiBaseUrl+"/auth";#i=s(h);session(){return this.#t.get(`${this.#e}/session`,{withCredentials:!0}).pipe(i(t=>this.#i.setSession(t)))}register(t,e){return this.#t.post(`${this.#e}/register?useCookies=true`,{email:t,password:e},{withCredentials:!0})}login(t,e){return this.#t.post(`${this.#e}/login?useCookies=true&useSessionCookies=true`,{email:t,password:e},{withCredentials:!0}).pipe(i(()=>this.session().subscribe()))}logout(){return this.#t.post(`${this.#e}/logout`,{},{withCredentials:!0}).pipe(n(()=>o(null)),i(()=>this.#i.clear()),a(()=>this.session().subscribe({error:()=>{}})))}static \u0275fac=function(e){return new(e||r)};static \u0275prov=u({token:r,factory:r.\u0275fac,providedIn:"root"})};export{c as a};
