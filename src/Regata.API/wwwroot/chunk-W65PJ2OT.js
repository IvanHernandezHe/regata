import{a as F}from"./chunk-JW6QLQJL.js";import"./chunk-XZYRJXKI.js";import"./chunk-Y2TFCETJ.js";import{b as C}from"./chunk-O3H6VTXY.js";import{c as E}from"./chunk-2VES27NH.js";import"./chunk-SG536L4V.js";import{a as b}from"./chunk-XTFK7LT5.js";import"./chunk-CLVRU5UC.js";import{g as w}from"./chunk-FI2SLH6F.js";import{Da as a,Ma as v,Ra as f,W as s,aa as p,ba as d,cb as c,db as i,eb as n,fb as y,kb as _,nb as m,vb as S,yb as l,zb as P}from"./chunk-4XZ7JV2Z.js";function k(o,e){if(o&1&&(i(0,"option",14),l(1),n()),o&2){let t=e.$implicit;c("value",t),a(),P(t)}}function V(o,e){if(o&1&&(i(0,"div",15),y(1,"app-product-card",16),n()),o&2){let t=e.$implicit;a(),c("product",t)}}var T=class o{api=s(b);route=s(C);cart=s(E);products=[];currentQuery="";categories=[];selectedCategory="";add(e){this.cart.add(e)}onSearch(e){let t=(e||"").trim();this.currentQuery=t,this.load()}onCategory(e){this.selectedCategory=e||"",this.load()}trackById(e,t){return t.id}load(){this.api.getProducts(this.currentQuery||void 0,this.selectedCategory||void 0).subscribe(e=>{this.products=e,this.categories=Array.from(new Set(e.map(t=>t.category).filter(Boolean))).sort()})}constructor(){let e=this.route.snapshot.queryParamMap,t=e.get("q");t&&(this.currentQuery=t);let r=e.get("category");r&&(this.selectedCategory=r),this.load()}static \u0275fac=function(t){return new(t||o)};static \u0275cmp=v({type:o,selectors:[["ng-component"]],decls:18,vars:5,consts:[["q",""],[1,"container","my-4"],[1,"d-flex","flex-column","flex-lg-row","justify-content-between","align-items-lg-center","gap-2","mb-3"],[1,"m-0"],[1,"d-flex","align-items-center","gap-2","w-100","w-lg-auto"],["placeholder","Buscar marca, modelo o SKU",1,"form-control",3,"input","value"],[1,"btn","btn-outline-secondary",3,"click"],[1,"d-flex","align-items-center","gap-2","mb-3"],[1,"text-muted"],[1,"form-select","w-auto",3,"change","value"],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"row","g-3"],["class","col-12 col-sm-6 col-lg-4",4,"ngFor","ngForOf","ngForTrackBy"],[3,"value"],[1,"col-12","col-sm-6","col-lg-4"],[3,"product"]],template:function(t,r){if(t&1){let u=_();i(0,"section",1)(1,"div",2)(2,"h2",3),l(3,"Tienda"),n(),i(4,"div",4)(5,"input",5,0),m("input",function(){p(u);let g=S(6);return d(r.onSearch(g.value))}),n(),i(7,"button",6),m("click",function(){return p(u),d(r.onSearch(""))}),l(8,"Limpiar"),n()()(),i(9,"div",7)(10,"label",8),l(11,"Categor\xEDa"),n(),i(12,"select",9),m("change",function(g){return p(u),d(r.onCategory(g.target.value))}),i(13,"option",10),l(14,"Todas"),n(),f(15,k,2,2,"option",11),n()(),i(16,"div",12),f(17,V,2,1,"div",13),n()()}t&2&&(a(5),c("value",r.currentQuery),a(7),c("value",r.selectedCategory),a(3),c("ngForOf",r.categories),a(2),c("ngForOf",r.products)("ngForTrackBy",r.trackById))},dependencies:[w,F],encapsulation:2})};export{T as ShopPage};
