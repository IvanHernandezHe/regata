import{a as l}from"./chunk-YONKQZSU.js";import{r as p,u as h}from"./chunk-FNKGIW6C.js";import{F as a,O as i,R as u,W as r,n as o,z as n}from"./chunk-7DVQ7J3I.js";var c=class s{#t=r(p);#e=h.apiBaseUrl+"/auth";#i=r(l);session(){return this.#t.get(`${this.#e}/session`,{withCredentials:!0}).pipe(i(t=>this.#i.setSession(t)))}register(t,e){return this.#t.post(`${this.#e}/register?useCookies=true`,{email:t,password:e},{withCredentials:!0})}login(t,e){return this.#t.post(`${this.#e}/login?useCookies=true&useSessionCookies=true`,{email:t,password:e},{withCredentials:!0}).pipe(i(()=>this.session().subscribe()))}logout(){return this.#t.post(`${this.#e}/logout`,{},{withCredentials:!0}).pipe(n(()=>o(null)),i(()=>this.#i.clear()),a(()=>this.session().subscribe({error:()=>{}})))}static \u0275fac=function(e){return new(e||s)};static \u0275prov=u({token:s,factory:s.\u0275fac,providedIn:"root"})};export{c as a};
